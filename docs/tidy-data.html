<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5 . 깔끔한 데이터 개념 | 데이터 시각화</title>
<meta name="author" content="한국 R 사용자회">
<meta name="description" content="div.blue { background-color:#e6f0ff; border-radius: 5px; padding: 10px;} 톨스토이 장편소설 “안나 카레니나”에 나오는 유명한 문구로 행복한 가정 원칙이 있다. “행복한 가정은 모두 비슷한 이유로 행복하지만 불행한 가정은 저마다의 이유로 불행하다.” (“Все счастливые семьи...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="5 . 깔끔한 데이터 개념 | 데이터 시각화">
<meta property="og:type" content="book">
<meta property="og:description" content="div.blue { background-color:#e6f0ff; border-radius: 5px; padding: 10px;} 톨스토이 장편소설 “안나 카레니나”에 나오는 유명한 문구로 행복한 가정 원칙이 있다. “행복한 가정은 모두 비슷한 이유로 행복하지만 불행한 가정은 저마다의 이유로 불행하다.” (“Все счастливые семьи...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5 . 깔끔한 데이터 개념 | 데이터 시각화">
<meta name="twitter:description" content="div.blue { background-color:#e6f0ff; border-radius: 5px; padding: 10px;} 톨스토이 장편소설 “안나 카레니나”에 나오는 유명한 문구로 행복한 가정 원칙이 있다. “행복한 가정은 모두 비슷한 이유로 행복하지만 불행한 가정은 저마다의 이유로 불행하다.” (“Все счастливые семьи...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">데이터 시각화</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">데이터 시각화</a></li>
<li><a class="" href="hello-world.html"><span class="header-section-number">1</span> 헬로우 월드</a></li>
<li><a class="" href="%EC%8B%9C%EA%B0%81%ED%99%94-%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C.html">시각화 구성요소</a></li>
<li><a class="" href="viz-font.html"><span class="header-section-number">2</span> 글꼴</a></li>
<li><a class="" href="viz-color.html"><span class="header-section-number">3</span> 색상</a></li>
<li><a class="" href="ggplot-component.html"><span class="header-section-number">4</span> 구성요소</a></li>
<li><a class="" href="%EC%8B%9C%EA%B0%81%ED%99%94-%EC%A0%84%EC%9A%A9-%EB%8D%B0%EC%9D%B4%ED%84%B0.html">시각화 전용 데이터</a></li>
<li><a class="active" href="tidy-data.html"><span class="header-section-number">5</span> 깔끔한 데이터 개념</a></li>
<li><a class="" href="ggplot-datasets.html"><span class="header-section-number">6</span> 준비된 데이터</a></li>
<li><a class="" href="tidy-data-how.html"><span class="header-section-number">7</span> 깔끔화 방법</a></li>
<li><a class="" href="%EC%8B%9C%EA%B0%81%ED%99%94.html">시각화</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">8</span> 그래프 문법</a></li>
<li><a class="" href="ggplot-pattern.html"><span class="header-section-number">9</span> 시각화 패턴</a></li>
<li><a class="" href="%EC%82%AC%EB%A1%80.html">사례</a></li>
<li><a class="" href="case-journalism.html"><span class="header-section-number">10</span> 데이터 저널리즘</a></li>
<li><a class="" href="case-worldcup.html"><span class="header-section-number">11</span> 러시아 월드컵</a></li>
<li><a class="" href="case-corona.html"><span class="header-section-number">12</span> 코로나19</a></li>
<li><a class="" href="references-1.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="tidy-data" class="section level1" number="5">
<h1>
<span class="header-section-number">5 . </span> 깔끔한 데이터 개념<a class="anchor" aria-label="anchor" href="#tidy-data"><i class="fas fa-link"></i></a>
</h1>
<style>
div.blue { background-color:#e6f0ff; border-radius: 5px; padding: 10px;}
</style>
<div class="blue">
<p><strong>톨스토이</strong> 장편소설 “안나 카레니나”에 나오는 유명한 문구로 <strong>행복한 가정</strong> 원칙이 있다.</p>
<blockquote>
<p>“행복한 가정은 모두 비슷한 이유로 행복하지만 불행한 가정은 저마다의 이유로 불행하다.”
(“Все счастливые семьи похожи друг на друга, каждая несчастливая семья несчастлива по-своему”,
Happy families are all alike, but every unhappy family is unhappy in its own way.)</p>
</blockquote>
<p><strong>유발 하라리</strong>도 이를 차용하여 “세상에 실패한 국가의 유형도 각기 저마다의 이유로 다르지만, 성공한 국가는 비슷한 이유를 갖는다”라고 주장했고, <strong>해들리 위컴(Hadley Wickham)</strong>도 “Like families, tidy datasets are all alike but every messy dataset is messy in its own way.” <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html">Tidy Data</a>에 대한 정의를 내리면서 동일한 주장을 했다.</p>
</div>
<div id="tidy-data" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> 데이터 깔끔화<a class="anchor" aria-label="anchor" href="#tidy-data"><i class="fas fa-link"></i></a>
</h2>
<p>시각화를 하기 전에 데이터를 깔끔하게 해야하는 이유는 근본적으로 사람이 보는 데이터와 기계가 처리하는
데이터의 형태가 다르기 때문이다. 즉, 사람이 보기 좋은 데이터는 기계가 처리하기 어렵고,
기계가 처리하기 좋은 형태는 사람이 보고 이해하는데 어려움이 있다.
따라서, 시각화를 위한 깔끔한 데이터(Tidy datasets)가 준비되면, 데이터를 조작하고, 모형화하고, 시각화는 물론이고
커뮤니케이션도 용이하다.</p>
<p>깔끔한 데이터 원칙은 코드(Codd) 박사의 <strong>관계대수(relational algebra)</strong> 와 깊은 관련이 있지만,
통계학 전공자에게 친숙한 언어로 표현하여 데이터를 다루는 실무에 익숙한 통계학자와 데이터 분석가에 적합하다.</p>
<p>깔끔한 데이터는 특정한 구조를 갖추고 있는데 <strong>변수</strong> 는 열(column)이고, <strong>관측점</strong> 은 행(row)이며,
행과 열이 교차하는 셀(Cell)은 <strong>값(Value)</strong>이 위치하게 되고
<strong>관측단위에 대한 형태</strong> 는 테이블(table)로 구성된다. <span class="citation">(<a href="references-1.html#ref-JSSv059i10" role="doc-biblioref">Wickham 2014</a>)</span></p>
<p>해당 데이터셋에 관측점과 변수를 식별하는 것이 쉽게 생각되지만,
일반적으로 변수와 관측점을 정확하게 정의하는 것이 놀랍게도 어렵다.
행과 행보다는 변수간 <strong>기능적 관계(functional relationship)</strong>를 기술하는 것이 더 쉽기 때문에
칼럼 그룹집단 비교보다 관측점 그룹집단 사이 비교를 하는 것이 더 쉽다.
최근에 <code>rowwise()</code> 연산자가 도입되어 필요한 경우 행으로 데이터 작업하는 것도 수월해졌다.</p>
</div>
<div id="tidy-data-setup" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> 깔끔한 데이터<a class="anchor" aria-label="anchor" href="#tidy-data-setup"><i class="fas fa-link"></i></a>
</h2>
<p>깔끔한 데이터는 데이터셋의 의미를 구조에 매칭하는 표준적인 방식이다.
행, 열, 테이블이 관측점, 변수, 형식에 매칭되는 방식에 따라
데이터셋이 깔끔하거나 깔끔하지 않은 것으로 나뉜다.</p>
<p><strong>깔끔한 데이터(tidy data)</strong> 는 결국 데이터 분석을 쉽게 할 수 있는 데이터로 볼 수 있다.</p>
<ol style="list-style-type: decimal">
<li>각 변수가 칼럼이 된다.</li>
<li>각 관측점은 행이 된다.</li>
<li>각 셀은 값이 된다.</li>
<li>관측 단위에 대한 형태가 테이블을 구성한다.</li>
</ol>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>저장 구분</th>
<th>의미</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>테이블/파일(table/file)</td>
<td>데이터셋 (dataset)</td>
</tr>
<tr class="even">
<td>행(row)</td>
<td>관측점 (observation)</td>
</tr>
<tr class="odd">
<td>열(column)</td>
<td>변수 (variable)</td>
</tr>
<tr class="even">
<td>셀(Cell)</td>
<td>값 (value)</td>
</tr>
</tbody>
</table></div>
<style>
div.blue { background-color:#e6f0ff; border-radius: 5px; padding: 10px;}
</style>
<div class="blue">
<p><strong>데이터셋(Dataset)</strong></p>
<p>데이터셋은 정량적이면 숫자형, 정성적이면 문자열로 저장되는 <strong>값(value)</strong> 의 집합이다.
모든 값은 <em>변수(variable)</em> 와 <em>관측점(observation)</em> 에 속하게 된다.
변수에 모든 값은 동일한 속성을 측정하게 되고 (예를 들어, 키, 온도, 기간 등),
관측점은 속성마다 동일한 단위로 측정되는 값이 담겨진다 (예를 들어, 사람, 종족, 날짜).</p>
</div>
<p>깔끔한 데이터가 의미가 있으려면 깔끔한 데이터가 입력으로 들어가서 깔끔한 데이터가 입력으로 나와야만 된다.</p>
<ul>
<li>(깔끔한) 데이터 입력 → 함수 f(x) → (깔끔한) 데이터 출력</li>
<li>Tidy-input → 함수 f(x) → Tidy-output</li>
</ul>
</div>
<div id="messy-data-definition" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> 엉망진창 데이터<a class="anchor" aria-label="anchor" href="#messy-data-definition"><i class="fas fa-link"></i></a>
</h2>
<p><strong>깔끔하지 않는 데이터(messy data)</strong> 는 앞서 언급한 깔끔한 데이터와 다른 형태 데이터를 지칭한다.
컴퓨터 과학에서 말하는 코드 제3 정규형이지만, 해들리 위컴이 통계적 언어로 다시 표현한 것이다.
또한, 깔끔한 데이터는 R같은 벡터화 프로그래밍 언어에 특히 잘 맞는다.
왜냐하면 동일한 관측점에 대한 서로 다른 변수 값이 항상 짝으로 매칭되는 것을 보장하기 때문이다.</p>
<p>변수와 관측점의 순서가 분석에 영향을 끼치는 것은 아니지만,
순서를 잘 맞춰 놓으면 값을 스캔해서 검색하는 것이 용이하다.
고정된 변수(fixed variable)가 실험계획법에 기술되고 나서 측정된 값이 뒤에 나오는 것처럼
변수와 값에 대한 순위를 잘 맞춰 정리해 놓게 되면 장점이 많다.</p>
<p>깔끔한 데이터를 사실 이해하기는 쉽지 않다. 하지만 엉망진창인 데이터(Messy Data)를
보게 되면 상대적으로 깔끔한 데이터(Tidy Data)에 대한 이해를 높일 수 있다.
깔끔하지 않은 데이터의 대표적인 문제점을 다음과 같이 5가지로 유형화시켜 정리할 수 있다.</p>
<ol style="list-style-type: decimal">
<li>칼럼 헤더에 변수명이 아닌 값이 온다.</li>
<li>변수 다수가 한 칼럼에 저장되어 있다.</li>
<li>변수가 행과 열에 모두 저장되어 있다.</li>
<li>관측 단위에 대한 다양한 형태가 동일한 테이블에 저장되어 있다.</li>
<li>한가지 관측 단위가 테이블 다수에 흩어져 저장되어 있다.</li>
</ol>
<div class="row">
<div class="col-md-6">
<p><strong>깔끔한 데이터가 아닌 보통 데이터</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>id</th>
<th>x</th>
<th>y</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>22.19</td>
<td>24.05</td>
</tr>
<tr class="even">
<td>2</td>
<td>19.82</td>
<td>22.91</td>
</tr>
<tr class="odd">
<td>3</td>
<td>19.81</td>
<td>21.19</td>
</tr>
<tr class="even">
<td>4</td>
<td>17.49</td>
<td>18.59</td>
</tr>
<tr class="odd">
<td>5</td>
<td>19.44</td>
<td>19.85</td>
</tr>
</tbody>
</table></div>
</div>
<div class="col-md-6">
<p><strong>깔끔하게 처리한 데이터 </strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>id</th>
<th>변수</th>
<th>값</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>x</td>
<td>22.19</td>
</tr>
<tr class="even">
<td>2</td>
<td>x</td>
<td>19.82</td>
</tr>
<tr class="odd">
<td>3</td>
<td>x</td>
<td>19.81</td>
</tr>
<tr class="even">
<td>4</td>
<td>x</td>
<td>17.49</td>
</tr>
<tr class="odd">
<td>5</td>
<td>x</td>
<td>19.44</td>
</tr>
<tr class="even">
<td>1</td>
<td>y</td>
<td>24.05</td>
</tr>
<tr class="odd">
<td>2</td>
<td>y</td>
<td>22.91</td>
</tr>
<tr class="even">
<td>3</td>
<td>y</td>
<td>21.19</td>
</tr>
<tr class="odd">
<td>4</td>
<td>y</td>
<td>18.59</td>
</tr>
<tr class="even">
<td>5</td>
<td>y</td>
<td>19.85</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div id="tidy-data-case-study" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> 깔끔한 데이터 사례<a class="anchor" aria-label="anchor" href="#tidy-data-case-study"><i class="fas fa-link"></i></a>
</h2>
<p>깔끔하지 못한 데이터로 지목(?)된 퓨리서치 원데이터는 <a href="http://pewforum.org/Datasets/Dataset-Download.aspx">Pew Research Center Religion &amp; Public Life</a> 웹사이트에서
2015년 다운로드 받았고, <a href="https://github.com/hadley/tidy-data/blob/master/data/pew.sav">GitHub</a>에
데이터가 공유되어 있다.</p>
<p>깔끔하지 않은 <code>messy</code> 상태 데이터를 깔끔한 <code>tidy</code> 상태 데이터로 변환시킨 사례를
통해 실전 감각을 익혀보자.</p>
<div class="row">
<div class="col-md-6">
<p><strong>깔끔하기 전 데이터</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>종교</th>
<th>&lt;$10k</th>
<th>$10-20k</th>
<th>$20-30k</th>
<th>$30-40k</th>
<th>$40-50k</th>
<th>$50-75k</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Agnostic</td>
<td>27</td>
<td>34</td>
<td>60</td>
<td>81</td>
<td>76</td>
<td>137</td>
</tr>
<tr class="even">
<td>Atheist</td>
<td>12</td>
<td>27</td>
<td>37</td>
<td>52</td>
<td>35</td>
<td>70</td>
</tr>
<tr class="odd">
<td>Buddhist</td>
<td>27</td>
<td>21</td>
<td>30</td>
<td>34</td>
<td>33</td>
<td>58</td>
</tr>
<tr class="even">
<td>Catholic</td>
<td>418</td>
<td>617</td>
<td>732</td>
<td>670</td>
<td>638</td>
<td>1116</td>
</tr>
<tr class="odd">
<td>모름/거절</td>
<td>15</td>
<td>14</td>
<td>15</td>
<td>11</td>
<td>10</td>
<td>35</td>
</tr>
<tr class="even">
<td>Evangel</td>
<td>575</td>
<td>869</td>
<td>1064</td>
<td>982</td>
<td>881</td>
<td>1486</td>
</tr>
<tr class="odd">
<td>Hindu</td>
<td>1</td>
<td>9</td>
<td>7</td>
<td>9</td>
<td>11</td>
<td>34</td>
</tr>
<tr class="even">
<td>Black Prot</td>
<td>228</td>
<td>244</td>
<td>236</td>
<td>238</td>
<td>197</td>
<td>223</td>
</tr>
<tr class="odd">
<td>여호와의 증인</td>
<td>20</td>
<td>27</td>
<td>24</td>
<td>24</td>
<td>21</td>
<td>30</td>
</tr>
<tr class="even">
<td>Jewish</td>
<td>19</td>
<td>19</td>
<td>25</td>
<td>25</td>
<td>30</td>
<td>95</td>
</tr>
</tbody>
</table></div>
</div>
<div class="col-md-6">
<p><strong>깔끔하게 만든 후 데이터</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>religion</th>
<th>income</th>
<th>freq</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Agnostic</td>
<td>&lt; $10k</td>
<td>27</td>
</tr>
<tr class="even">
<td>Agnostic</td>
<td>$10-20k</td>
<td>34</td>
</tr>
<tr class="odd">
<td>Agnostic</td>
<td>$20-30k</td>
<td>60</td>
</tr>
<tr class="even">
<td>Agnostic</td>
<td>$30-40k</td>
<td>81</td>
</tr>
<tr class="odd">
<td>Agnostic</td>
<td>$40-50k</td>
<td>76</td>
</tr>
<tr class="even">
<td>Agnostic</td>
<td>$50-75k</td>
<td>137</td>
</tr>
<tr class="odd">
<td>Agnostic</td>
<td>$75-100k</td>
<td>122</td>
</tr>
<tr class="even">
<td>Agnostic</td>
<td>$100-150k</td>
<td>109</td>
</tr>
<tr class="odd">
<td>Agnostic</td>
<td>&gt;$150k</td>
<td>84</td>
</tr>
<tr class="even">
<td>Agnostic</td>
<td>모름/거절</td>
<td>96</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<p>사실 깔끔하게 정리된 데이터는 사람이 보기에 적합하지는 않다. 오히려 엉망진창인
퓨리서치 원데이터가 사람이 이해하고 보기에는 더 편하다.</p>
</div>
<div id="make-tidy-data-code" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> 깔끔한 데이터 제작 코드<a class="anchor" aria-label="anchor" href="#make-tidy-data-code"><i class="fas fa-link"></i></a>
</h2>
<p>다운로드 받은 <code>pew.sav</code> 파일을 데이터프레임으로 만든 후 범주형 자료분석을 위해서 요인형(factor) 변수로 수준을 정리한 후 <code>count</code> 함수를 빈도수를 산출한다.</p>
<div class="inline-table"><table class="table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
religion
</th>
<th style="text-align:left;">
income
</th>
<th style="text-align:right;">
n
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
&lt;$10k
</td>
<td style="text-align:right;">
39
</td>
</tr>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
$10-20k
</td>
<td style="text-align:right;">
61
</td>
</tr>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
$20-30k
</td>
<td style="text-align:right;">
97
</td>
</tr>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
$30-40k
</td>
<td style="text-align:right;">
133
</td>
</tr>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
$40-50k
</td>
<td style="text-align:right;">
111
</td>
</tr>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
$50-75k
</td>
<td style="text-align:right;">
207
</td>
</tr>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
$75-100k
</td>
<td style="text-align:right;">
195
</td>
</tr>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
$100-150k
</td>
<td style="text-align:right;">
168
</td>
</tr>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
&gt;150k
</td>
<td style="text-align:right;">
158
</td>
</tr>
<tr>
<td style="text-align:left;">
Atheist
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
172
</td>
</tr>
</tbody>
</table></div>
<p>사람이 보기 편한 형태 <code>wide</code> 표형태 데이터는 다음과 같이 나타낼 수 있다. 과거 <code>spread()</code> 동사를 사용했다면 직관적인 함수인 <code>pivot_wider()</code>를 사용하는 것이 좋다. 인자도 <code>names_from=</code>, <code>values_from=</code> 을 사용해서 머릿속에 담긴 내용이 코드에 직관적으로 담기도록 코딩한다.</p>
<div class="inline-table"><table class="table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
income
</th>
<th style="text-align:right;">
Atheist
</th>
<th style="text-align:right;">
Buddhist
</th>
<th style="text-align:right;">
Catholic
</th>
<th style="text-align:right;">
Muslim
</th>
<th style="text-align:right;">
Orthodox
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
$10-20k
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
617
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
$20-30k
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
732
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
$30-40k
</td>
<td style="text-align:right;">
133
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
670
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
$40-50k
</td>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
638
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
$50-75k
</td>
<td style="text-align:right;">
207
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
1116
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
47
</td>
</tr>
<tr>
<td style="text-align:left;">
$75-100k
</td>
<td style="text-align:right;">
195
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
949
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
38
</td>
</tr>
<tr>
<td style="text-align:left;">
$100-150k
</td>
<td style="text-align:right;">
168
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
792
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
42
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="%EC%8B%9C%EA%B0%81%ED%99%94-%EC%A0%84%EC%9A%A9-%EB%8D%B0%EC%9D%B4%ED%84%B0.html">시각화 전용 데이터</a></div>
<div class="next"><a href="ggplot-datasets.html"><span class="header-section-number">6</span> 준비된 데이터</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#tidy-data"><span class="header-section-number">5</span> 깔끔한 데이터 개념</a></li>
<li><a class="nav-link" href="#tidy-data"><span class="header-section-number">5.1</span> 데이터 깔끔화</a></li>
<li><a class="nav-link" href="#tidy-data-setup"><span class="header-section-number">5.2</span> 깔끔한 데이터</a></li>
<li><a class="nav-link" href="#messy-data-definition"><span class="header-section-number">5.3</span> 엉망진창 데이터</a></li>
<li><a class="nav-link" href="#tidy-data-case-study"><span class="header-section-number">5.4</span> 깔끔한 데이터 사례</a></li>
<li><a class="nav-link" href="#make-tidy-data-code"><span class="header-section-number">5.5</span> 깔끔한 데이터 제작 코드</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>데이터 시각화</strong>" was written by 한국 R 사용자회. It was last built on 2022-05-03.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
