<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>13 . 러시아 월드컵 | 데이터 시각화</title>
<meta name="author" content="한국 R 사용자회">
<meta name="description" content="13.1 독일전 영상기록 러시아 월드컵 예선 마지막 독일과의 경기는 2패로 16강 탈락이 확정되었지만, 독일을 2-0으로 물리치는 감동적인 경기였다. 그럼에도 불구하고 인터넷 상에 남아 있는 영상기록은 많지 않고 SBS Sports 온라인뉴스팀 “대한민국 VS 독일 후반 하이라이트…김영권-손흥민 골”에서 그나마 고화질 동영상 기록을 제공하고 있다....">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="13 . 러시아 월드컵 | 데이터 시각화">
<meta property="og:type" content="book">
<meta property="og:description" content="13.1 독일전 영상기록 러시아 월드컵 예선 마지막 독일과의 경기는 2패로 16강 탈락이 확정되었지만, 독일을 2-0으로 물리치는 감동적인 경기였다. 그럼에도 불구하고 인터넷 상에 남아 있는 영상기록은 많지 않고 SBS Sports 온라인뉴스팀 “대한민국 VS 독일 후반 하이라이트…김영권-손흥민 골”에서 그나마 고화질 동영상 기록을 제공하고 있다....">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="13 . 러시아 월드컵 | 데이터 시각화">
<meta name="twitter:description" content="13.1 독일전 영상기록 러시아 월드컵 예선 마지막 독일과의 경기는 2패로 16강 탈락이 확정되었지만, 독일을 2-0으로 물리치는 감동적인 경기였다. 그럼에도 불구하고 인터넷 상에 남아 있는 영상기록은 많지 않고 SBS Sports 온라인뉴스팀 “대한민국 VS 독일 후반 하이라이트…김영권-손흥민 골”에서 그나마 고화질 동영상 기록을 제공하고 있다....">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">데이터 시각화</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">데이터 시각화</a></li>
<li><a class="" href="hello-world.html"><span class="header-section-number">1</span> 헬로우 월드</a></li>
<li><a class="" href="happy-viz.html"><span class="header-section-number">2</span> 행복한 시각화</a></li>
<li><a class="" href="%EC%8B%9C%EA%B0%81%ED%99%94-%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C.html">시각화 구성요소</a></li>
<li><a class="" href="viz-font.html"><span class="header-section-number">3</span> 글꼴</a></li>
<li><a class="" href="viz-color.html"><span class="header-section-number">4</span> 색상</a></li>
<li><a class="" href="ggplot-component.html"><span class="header-section-number">5</span> 구성요소</a></li>
<li><a class="" href="%EC%8B%9C%EA%B0%81%ED%99%94-%EC%A0%84%EC%9A%A9-%EB%8D%B0%EC%9D%B4%ED%84%B0.html">시각화 전용 데이터</a></li>
<li><a class="" href="tidy-data.html"><span class="header-section-number">6</span> 깔끔한 데이터 개념</a></li>
<li><a class="" href="ggplot-datasets.html"><span class="header-section-number">7</span> 준비된 데이터</a></li>
<li><a class="" href="tidy-data-how.html"><span class="header-section-number">8</span> 깔끔화 방법</a></li>
<li><a class="" href="%EC%8B%9C%EA%B0%81%ED%99%94.html">시각화</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">9</span> 그래프 문법</a></li>
<li><a class="" href="ggplot-visualization.html"><span class="header-section-number">10</span> ggplot 시각화</a></li>
<li><a class="" href="ggplot-pattern.html"><span class="header-section-number">11</span> 시각화 패턴</a></li>
<li><a class="" href="%EC%82%AC%EB%A1%80.html">사례</a></li>
<li><a class="" href="case-journalism.html"><span class="header-section-number">12</span> 데이터 저널리즘</a></li>
<li><a class="active" href="case-worldcup.html"><span class="header-section-number">13</span> 러시아 월드컵</a></li>
<li><a class="" href="case-corona.html"><span class="header-section-number">14</span> 코로나19</a></li>
<li><a class="" href="references-1.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="case-worldcup" class="section level1" number="13">
<h1>
<span class="header-section-number">13 . </span> 러시아 월드컵<a class="anchor" aria-label="anchor" href="#case-worldcup"><i class="fas fa-link"></i></a>
</h1>
<div id="russia-2018-worldcup" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> 독일전 영상기록<a class="anchor" aria-label="anchor" href="#russia-2018-worldcup"><i class="fas fa-link"></i></a>
</h2>
<p>러시아 월드컵 예선 마지막 독일과의 경기는 2패로 16강 탈락이 확정되었지만, 독일을 2-0으로 물리치는 감동적인 경기였다. 그럼에도 불구하고 인터넷 상에 남아 있는 영상기록은 많지 않고 SBS Sports 온라인뉴스팀 <a href="http://programs.sbs.co.kr/sports/fifawc/article/54896/S10009123103">“대한민국 VS 독일 후반 하이라이트…김영권-손흥민 골”</a>에서 그나마 고화질 동영상 기록을 제공하고 있다. Tokyo R에서 <strong>Ryo Nakagawara</strong> 발표했던 것에 영감을 받아 독일과 월드컵 최종예선 데이터를 시각화하여 기록해서 남겨두고자 한국알사용자회에서 기여한 것이다. <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://datascienceplus.com/visualize-the-world-cup-with-r-part-1-recreating-goals-with-ggsoccer-and-ggplot2/"&gt;Ryo Nakagawara, “Visualize the World Cup with R! Part 1: Recreating Goals with ggsoccer and ggplot2”&lt;/a&gt;&lt;/p&gt;'><sup>8</sup></a> <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://datascienceplus.com/animating-the-goals-of-the-world-cup-comparing-the-old-vs-new-gganimate-and-tweenr-api/"&gt;Ryo Nakagawara, “Animating the Goals of the World Cup: Comparing the old vs. new gganimate and tweenr API”&lt;/a&gt;&lt;/p&gt;'><sup>9</sup></a> <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/Ryo-N7/soccer_ggplots"&gt;Soccer ggplot - Tokyo R Meetup&lt;/a&gt;&lt;/p&gt;'><sup>10</sup></a></p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th><strong>김영권(90+2)</strong></th>
<th><strong>손흥민(90+6)</strong></th>
</tr></thead>
<tbody><tr class="odd">
<td><img src="assets/images/worldcup_first_goal.gif" style="width:100.0%" alt="첫번째 꼴"></td>
<td><img src="assets/images/worldcup_second_goal.gif" style="width:100.0%" alt="두번째 꼴"></td>
</tr></tbody>
</table></div>
</div>
<div id="russia-2018-worldcup-germany" class="section level2" number="13.2">
<h2>
<span class="header-section-number">13.2</span> 정적 시각화<a class="anchor" aria-label="anchor" href="#russia-2018-worldcup-germany"><i class="fas fa-link"></i></a>
</h2>
<p>스포츠를 데이터를 통해 이해하는 첫걸음은 아마도 정적 시각화를 먼저 실행하는 것이다.
이를 위해서 먼저 해당 기록을 남기고자 하는 아이디어가 생기거나 다른 프로젝트나
뉴슬 통해 영감을 얻게 되면 공공데이터가 존재하여 해당 아이디어를
시각화할 수 있는지 가늠하는 것이 시작이다.</p>
<div id="russia-2018-worldcup-germany-player" class="section level3" number="13.2.1">
<h3>
<span class="header-section-number">13.2.1</span> 월드컵 참가선수 명단<a class="anchor" aria-label="anchor" href="#russia-2018-worldcup-germany-player"><i class="fas fa-link"></i></a>
</h3>
<p>러시아 월드컵에 참가한 선수명단은 <a href="https://ko.wikipedia.org/wiki/2018%EB%85%84_FIFA_%EC%9B%94%EB%93%9C%EC%BB%B5_%EC%84%A0%EC%88%98_%EB%AA%85%EB%8B%A8">위키 - 2018년_FIFA_월드컵_선수_명단</a> 웹페이지에서 확인이 가능하다. 이를 위해서 먼저 <code>rvest</code> 팩키지를 활용하여 정적 웹페이지를 긁어와서 데이터 정제작업을 거처 월드컵 참가 선수 명단을 확정한다.</p>
<p>최종 시각화에 필요한 패키지를 설치한다. <a href="https://torvaney.github.io/ggsoccer/"><code>ggsoccer</code></a>는 CRAN에도 등록되어 있어 <code>install.packages("ggsoccer")</code> 명령어나 <code>devtools::install_github("torvaney/ggsoccer")</code> 명령어로 설치한다.
2년전 초창기에는 GitHub 저장소에 공개되었고 이후 안정화를 거쳐 CRAN에 정식 등록되었다. 그밖에도 웹크롤링에 필요한 <code>rvest</code> 패키지와 애니메이션 제작에 필요한 <code>gganimate</code>, <code>tweenr</code> 패키지를 설치한다. <code>ggimage</code> 패키지는 명칭에도 나오지만 <code>ggplot</code>에 이모티콘, 아이콘, 그림 등을 넣을 수 있게 해주는 패키지다.</p>
<p>위키페이지에서 러시아 월드컵에 출전한 선수 주요선수를 득점 기준으로 10명 추려보자.</p>
</div>
<div id="출전선수-명단" class="section level3" number="13.2.2">
<h3>
<span class="header-section-number">13.2.2</span> 출전선수 명단<a class="anchor" aria-label="anchor" href="#%EC%B6%9C%EC%A0%84%EC%84%A0%EC%88%98-%EB%AA%85%EB%8B%A8"><i class="fas fa-link"></i></a>
</h3>
<p>러시아 월드컵 선수명단에 포함되었다고 독일전에 출전한 것은 아니다.
러시아 월드컵 마지막 경기여서 앞선 경기에서 주전이였으나 부상, 경기력 부족으로 교체된 선수도 있기 때문에
실제 독일전에 출전한 선수가 중요하다.
독일전은 2018-08-27 예선전이 열렸으며 골키퍼 조현우를 비롯한 선발선수명단이 각 포지션별로 발표되었다.</p>
<ul>
<li>골키퍼: 조현우</li>
<li>수비: 이용 윤영선 김영권 홍철</li>
<li>미드필드: 이재성 정우영 장현수 문선민</li>
<li>공격: 구자철 손흥민</li>
</ul>
<p><a href="https://torvaney.github.io/projects/tracker#">Soccer event logger</a>를 활용하여 각 선수별 위치를 축구경기장에 클릭하여 좌표를 얻은 후에 선수명을 수작업을 붙여 놓고 이를 <code>ggsoccer</code> 팩키지 <code>annotate_pitch()</code>, <code>theme_pitch()</code> 함수를 사용해서 시각화한다.</p>
<div class="inline-figure"><img src="case-study-worldcup_files/figure-html/worldcup-germany-lineup-1.png" width="576" style="display: block; margin: auto;"></div>
</div>
<div id="russia-2018-worldcup-germany-goal" class="section level3" number="13.2.3">
<h3>
<span class="header-section-number">13.2.3</span> 독일전 골모음<a class="anchor" aria-label="anchor" href="#russia-2018-worldcup-germany-goal"><i class="fas fa-link"></i></a>
</h3>
<p>정규 경기시간이 모두 소진된 후에 추가시간이 6분 주워졌고, 추가시간 2분 손흥민의 코너킥이 김영권에 이어지면서 독일전 첫골이 완성되었다. 축구장 골의 움직임은 <code>ball_df</code> 데이터프레임에 2차원 평면이라 <code>from</code>, <code>to</code>로 <code>x</code>, <code>y</code> 각각 데이터화시킨다. 축구선수의 위치는 <code>first_player_df</code> 데이터프레임의 첫번째 골에 관여한 선수 위치를 담아낸다.
선수의 위치는 <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>, 공의 움직임은 <code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">geom_segment()</a></code>로 나타내고 첫번째 골의 이동에 집중할 수 있도록 관련된 부분을 정리하고 점위에 텍스트를 추가하여 선수명을 명확히 한다.</p>
<div class="inline-figure"><img src="case-study-worldcup_files/figure-html/germany-first-goal-1.png" width="576" style="display: block; margin: auto;"></div>
<p>독일전 두번째 골은 연장 추가시간 막판 골키퍼까지 나와 만회골을 위해 혼신을 다하던 순간, 주세종이 골을 뽑아내고 이를 손흥민에 연결하여 여유있게 골을 골망에 넣어 두번째골이 완성되었다. 앞선방법과 동일하게 두번째 골도 공의 위치와 선수를 데이터프레임에 담아내고 <code>ggplot</code>으로 시각화한다.</p>
<div class="inline-figure"><img src="case-study-worldcup_files/figure-html/germany-second-goal-1.png" width="576" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="russia-2018-worldcup-germany-ani" class="section level2" number="13.3">
<h2>
<span class="header-section-number">13.3</span> 동적 시각화<a class="anchor" aria-label="anchor" href="#russia-2018-worldcup-germany-ani"><i class="fas fa-link"></i></a>
</h2>
<p><code>ggplot</code>을 활용한 동적 시각화는 기본적으로 정적 시각화 <code>ggplot</code> 그래프를 생성하고 나서 이를
애니메이션을 원하면 <code>gganimate</code>, 인터랙티브 그래프를 원하면 <code>plotly</code> 패키지에 연결시키는 것이 일반적이다.</p>
<p>선수의 위치와 골의 이동경로를 설정하고 <code>time</code> 순서를 지정한다. 그리고 나서, <code>gganimate</code> 팩키지 <code>transition_states()</code> 함수를 사용해서 득점장면 애니메이션을 생성시킨다.</p>
<div id="russia-2018-worldcup-germany-player-first" class="section level3" number="13.3.1">
<h3>
<span class="header-section-number">13.3.1</span> 김영권 첫번째 골<a class="anchor" aria-label="anchor" href="#russia-2018-worldcup-germany-player-first"><i class="fas fa-link"></i></a>
</h3>
<p>독일전 첫번째 골의 경우 손흥민 코너킥으로 선수의 움직임이 크지 않은 상태에서 공이 손흥민 → 이승우 → 윤영선 → 김영권으로 연결되며 골로 연결된 경우다. 따라서 골의 움직임만 <code>time</code>을 주어 이동시키면 애니메이션을 간단히 제작할 수 있다.</p>
<div class="figure">
<img src="assets/images/first_goal.gif" alt=""><p class="caption">러시아 월드컵 독일전 첫번째 골</p>
</div>
</div>
<div id="russia-2018-worldcup-germany-player-second" class="section level3" number="13.3.2">
<h3>
<span class="header-section-number">13.3.2</span> 손흥민 두번째 골<a class="anchor" aria-label="anchor" href="#russia-2018-worldcup-germany-player-second"><i class="fas fa-link"></i></a>
</h3>
<p>두번째 손흥민의 골은 주세종이 독일 골키퍼로부터 공을 가로채서 이를 손흥민에 연결하고 손흥민이 빠른 주력을 이용하여 골대까지 전력질주하여 골을 넣은 경우라, 공뿐만 아니라 선수의 움직임도 함께 애니메이션화하여 시각화한다.</p>
<div class="figure">
<img src="assets/images/second_goal.gif" alt=""><p class="caption">러시아 월드컵 독일전 두번째 골</p>
</div>

</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="case-journalism.html"><span class="header-section-number">12</span> 데이터 저널리즘</a></div>
<div class="next"><a href="case-corona.html"><span class="header-section-number">14</span> 코로나19</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#case-worldcup"><span class="header-section-number">13</span> 러시아 월드컵</a></li>
<li><a class="nav-link" href="#russia-2018-worldcup"><span class="header-section-number">13.1</span> 독일전 영상기록</a></li>
<li>
<a class="nav-link" href="#russia-2018-worldcup-germany"><span class="header-section-number">13.2</span> 정적 시각화</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#russia-2018-worldcup-germany-player"><span class="header-section-number">13.2.1</span> 월드컵 참가선수 명단</a></li>
<li><a class="nav-link" href="#%EC%B6%9C%EC%A0%84%EC%84%A0%EC%88%98-%EB%AA%85%EB%8B%A8"><span class="header-section-number">13.2.2</span> 출전선수 명단</a></li>
<li><a class="nav-link" href="#russia-2018-worldcup-germany-goal"><span class="header-section-number">13.2.3</span> 독일전 골모음</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#russia-2018-worldcup-germany-ani"><span class="header-section-number">13.3</span> 동적 시각화</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#russia-2018-worldcup-germany-player-first"><span class="header-section-number">13.3.1</span> 김영권 첫번째 골</a></li>
<li><a class="nav-link" href="#russia-2018-worldcup-germany-player-second"><span class="header-section-number">13.3.2</span> 손흥민 두번째 골</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>데이터 시각화</strong>" was written by 한국 R 사용자회. It was last built on 2022-05-05.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
