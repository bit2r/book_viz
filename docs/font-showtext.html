<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>6 . showtext 패키지 2 | 데이터 시각화</title>
<meta name="author" content="한국 R 사용자회">
<meta name="description" content="extrafont 패키지를 통해 한자를 포함한 한글을 처리할 수 있었으나, extrafont는 트루타입폰트(.ttf)를 PDF 그래픽 장치에 초점을 맞춰 개발이 되었다. 따라서, 데이터과학 최종산출물이 PDF 형태 책이 아닌 경우 여러가지 면에서 다양한 한글 글꼴을 표현하는데 있어 한계가 있다. 새로 개발된 showtext 팩키지는...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="6 . showtext 패키지 2 | 데이터 시각화">
<meta property="og:type" content="book">
<meta property="og:description" content="extrafont 패키지를 통해 한자를 포함한 한글을 처리할 수 있었으나, extrafont는 트루타입폰트(.ttf)를 PDF 그래픽 장치에 초점을 맞춰 개발이 되었다. 따라서, 데이터과학 최종산출물이 PDF 형태 책이 아닌 경우 여러가지 면에서 다양한 한글 글꼴을 표현하는데 있어 한계가 있다. 새로 개발된 showtext 팩키지는...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="6 . showtext 패키지 2 | 데이터 시각화">
<meta name="twitter:description" content="extrafont 패키지를 통해 한자를 포함한 한글을 처리할 수 있었으나, extrafont는 트루타입폰트(.ttf)를 PDF 그래픽 장치에 초점을 맞춰 개발이 되었다. 따라서, 데이터과학 최종산출물이 PDF 형태 책이 아닌 경우 여러가지 면에서 다양한 한글 글꼴을 표현하는데 있어 한계가 있다. 새로 개발된 showtext 팩키지는...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">데이터 시각화</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> 데이터 시각화</a></li>
<li><a class="" href="hello-world.html"><span class="header-section-number">2</span> 헬로우 월드</a></li>
<li><a class="" href="%EC%8B%9C%EA%B0%81%ED%99%94-%EA%B0%9C%EC%9A%94.html">시각화 개요</a></li>
<li><a class="" href="viz-font.html"><span class="header-section-number">3</span> 글꼴</a></li>
<li><a class="" href="font-coding.html"><span class="header-section-number">4</span> R 코딩 글꼴</a></li>
<li><a class="" href="r-viz-font.html"><span class="header-section-number">5</span> ggplot 시각화 글꼴</a></li>
<li><a class="active" href="font-showtext.html"><span class="header-section-number">6</span> showtext 패키지 2</a></li>
<li><a class="" href="viz-color.html"><span class="header-section-number">7</span> 색상</a></li>
<li><a class="" href="%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%97%B0%EC%9E%A5---dplyr.html"><span class="header-section-number">8</span> 데이터 연장 - dplyr</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">9</span> 시각화</a></li>
<li><a class="" href="%EC%82%AC%EB%A1%80.html"><span class="header-section-number">10</span> 사례</a></li>
<li><a class="" href="references-1.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="font-showtext" class="section level1" number="6">
<h1>
<span class="header-section-number">6 . </span> <code>showtext</code> 패키지 <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://cran.rstudio.com/web/packages/showtext/index.html"&gt;showtext: Using Fonts More Easily in R
Graphs&lt;/a&gt;&lt;/p&gt;'><sup>2</sup></a><a class="anchor" aria-label="anchor" href="#font-showtext"><i class="fas fa-link"></i></a>
</h1>
<p><a href="https://github.com/wch/extrafont">extrafont</a> 패키지를 통해 한자를
포함한 한글을 처리할 수 있었으나, <a href="https://github.com/wch/extrafont">extrafont</a>는 트루타입폰트(<code>.ttf</code>)를
PDF 그래픽 장치에 초점을 맞춰 개발이 되었다. 따라서, 데이터과학
최종산출물이 PDF 형태 책이 아닌 경우 여러가지 면에서 다양한 한글 글꼴을
표현하는데 있어 한계가 있다.</p>
<p>새로 개발된 <a href="https://cran.rstudio.com/web/packages/showtext/index.html">showtext</a>
팩키지는 <code>Ghostscript</code>같은 외부 소프트웨어를 활용하지 않고도 다양한
(그래픽) 글꼴을 지원한다. <a href="https://cran.rstudio.com/web/packages/showtext/index.html">showtext</a>로
R 그래프를 생성할 때, 다양한 글꼴(TrueType, OpenType, Type 1, web fonts
등)을 지원한다.</p>
<p>과거 PDF와 같은 책형태로 정보를 공유하고 전달하는 방식이 주류를 이뤘다면
인터넷 등장 이후 웹으로 정보 생성과 소비가 주류로 떠오르게 되면서 글꼴에도
변화가 생겼다. 가까운 미래에는 웹을 우선시하는 글꼴이 대세를 이룰 것으로 보인다.</p>
<div class="figure">
<img src="assets/images/font-showtext.png" style="width:100.0%" alt=""><p class="caption"><code>showtext</code> 글꼴</p>
</div>
<p>사용자가 그래프에 텍스트를 넣기 위해 R 함수에서 <code><a href="https://rdrr.io/r/graphics/text.html">text()</a></code>를 호출할 때
<code>showtext</code>가 활성화 되어 있으면 <code>showtext</code> 팩키지 <code><a href="https://rdrr.io/r/graphics/text.html">text()</a></code> 함수를
호출해서 그래픽 혹은 이미지 파일에 텍스트를 표현하고 그렇지 않는 경우는
디폴트 장치함수 <code><a href="https://rdrr.io/r/graphics/text.html">text()</a></code> 함수를 호출하게 되어 있다.</p>
<p>내부적으로 상세 작동 로직은 글꼴 위치를 파악해서 글리프(glyph) 정보를
추출하고 비트맵 형식, 벡터그래픽 형식에 따라서 비트맵일 경우 <code>raster()</code>
장치함수를 호출하고, 벡터그래픽인 경우 <code>path()</code> 장치함수를 호출해서
기능을 수행한다.</p>
<div id="showtext-korean-example" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> R 설치 글꼴 확인<a class="anchor" aria-label="anchor" href="#showtext-korean-example"><i class="fas fa-link"></i></a>
</h2>
<p><code>extrafont</code> 팩키지 <code><a href="https://rdrr.io/pkg/extrafont/man/loadfonts.html">loadfonts()</a></code> 함수를 통해 <code>.ttf</code> 파일 정보를
확인한다. 현재 <a href="http://www.google.com/fonts">구글 글끌</a> 페이지에서 많은 한글
글꼴을 지원하지 않고 있다. 구글에서 전세계 글꼴을 지원하다보 동아시아 3국 대상으로
지원되는 글꼴은 적은 것으로 보인다.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 0. 환경설정 --------------------------------------------------------------------------</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yixuan/showtext">showtext</a></span><span class="op">)</span> <span class="co"># 글꼴, install.packages("showtext")</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wch/extrafont">extrafont</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/extrafont/man/loadfonts.html">loadfonts</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="font-showtext-korean-example-ggplot" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> <code>ggplot</code> 글꼴 적용<a class="anchor" aria-label="anchor" href="#font-showtext-korean-example-ggplot"><i class="fas fa-link"></i></a>
</h2>
<p>한글 글꼴을 바로 적용하기에 앞서 <code>showtext</code> 패키지 포함된 영문글꼴 적용 사례를 먼저 돌려보자.
<code>ggplot</code> 그래픽에 적용되는 <code>showtext</code> 활용 기본 작업흐름은 다음과 같다.</p>
<ol style="list-style-type: decimal">
<li>글꼴을 적재한다.</li>
<li>그래픽 장치를 연다</li>
<li>
<code>showtext</code>를 통해 텍스트를 표시한다고 지정한다.</li>
<li>그래프를 그린다.</li>
<li>장치를 닫는다.</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yixuan/showtext">showtext</a></span><span class="op">)</span></code></pre></div>
<pre><code>## Loading required package: sysfonts</code></pre>
<pre><code>## Loading required package: showtextdb</code></pre>
<pre><code>## 
## Attaching package: 'showtextdb'</code></pre>
<pre><code>## The following object is masked from 'package:extrafont':
## 
##     font_install</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ggplot 그래픽 ----------------------------</span>

<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>cond <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span><span class="op">)</span>, each<span class="op">=</span><span class="fl">200</span><span class="op">)</span><span class="op">)</span>, 
                  rating <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">200</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">200</span>, mean<span class="op">=</span><span class="fl">.8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_add_google.html">font_add_google</a></span><span class="op">(</span><span class="st">"Schoolbell"</span>, <span class="st">"bell"</span><span class="op">)</span> <span class="co"># 글꼴 적재</span>

<span class="fu"><a href="https://rdrr.io/pkg/showtext/man/showtext_begin.html">showtext.begin</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># 그래픽 장치 열기</span></code></pre></div>
<pre><code>## 'showtext.begin()' is now renamed to 'showtext_begin()'
## The old version still works, but consider using the new function in future code</code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">rating</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth<span class="op">=</span><span class="fl">.5</span><span class="op">)</span><span class="op">+</span> 
　<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, <span class="fl">1</span>, <span class="fl">2.1</span>, family <span class="op">=</span> <span class="st">"bell"</span>, size <span class="op">=</span> <span class="fl">15</span>, color<span class="op">=</span><span class="st">"red"</span>, label <span class="op">=</span> <span class="st">"histogram"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="basics-font_files/figure-html/font-showtext-showtext-ggplot-1.png" width="672"></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/showtext/man/showtext_end.html">showtext.end</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># 그래픽 장치 닫기</span></code></pre></div>
<pre><code>## 'showtext.end()' is now renamed to 'showtext_end()'
## The old version still works, but consider using the new function in future code</code></pre>
</div>
<div id="font-showtext-korean-example-ttf" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> 로컬 글꼴 적용<a class="anchor" aria-label="anchor" href="#font-showtext-korean-example-ttf"><i class="fas fa-link"></i></a>
</h2>
<p>로컬 컴퓨터에 저장된 <code>.ttf</code> 파일을 사용자 지정해서 가져온 후 이를
<code>ggplot</code>에 반영하여 한글을 R 그래프에 적용하는 것도 가능하다.
<code>showtext</code>는 <code>extrafont</code> 보다 나중에 개발되어 <code>extrafont</code>가
로컬 컴퓨터에 설치된 글꼴을 <code>ggplot</code>에 구현되는데 전력을 다했다면
<code>showtext</code>는 이를 발판으로 나중에 개발되어 구글 폰트와 같은
인터넷 글꼴과 최근 웹출판에 대한 개념도 넣어 개발된 것이 차이점이다.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ３. 한글 그래픽 --------------------------------------------------------------------------</span>
<span class="co">## 나눔펜　스크립트</span>
<span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_add.html">font_add</a></span><span class="op">(</span><span class="st">"NanumBarunGothic"</span>, <span class="st">"NanumBarunGothic.ttf"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/showtext/man/showtext_auto.html">showtext.auto</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## 'showtext.auto()' is now renamed to 'showtext_auto()'
## The old version still works, but consider using the new function in future code</code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="cn">NULL</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>, axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
        axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, <span class="fl">1</span>, <span class="fl">1.1</span>, family <span class="op">=</span> <span class="st">"NanumBarunGothic"</span>, size <span class="op">=</span> <span class="fl">15</span>, color<span class="op">=</span><span class="st">"red"</span>,
           label <span class="op">=</span> <span class="st">"한글 사랑"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, <span class="fl">1</span>, <span class="fl">0.9</span>, label <span class="op">=</span> <span class="st">'korean for "Hello, world!"'</span>,
           family <span class="op">=</span> <span class="st">"NanumBarunGothic"</span>, size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="basics-font_files/figure-html/showtext-showtext-korean-1.png" width="672"></div>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="r-viz-font.html"><span class="header-section-number">5</span> ggplot 시각화 글꼴</a></div>
<div class="next"><a href="viz-color.html"><span class="header-section-number">7</span> 색상</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#font-showtext"><span class="header-section-number">6</span> showtext 패키지 2</a></li>
<li><a class="nav-link" href="#showtext-korean-example"><span class="header-section-number">6.1</span> R 설치 글꼴 확인</a></li>
<li><a class="nav-link" href="#font-showtext-korean-example-ggplot"><span class="header-section-number">6.2</span> ggplot 글꼴 적용</a></li>
<li><a class="nav-link" href="#font-showtext-korean-example-ttf"><span class="header-section-number">6.3</span> 로컬 글꼴 적용</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>데이터 시각화</strong>" was written by 한국 R 사용자회. It was last built on 2022-05-02.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
